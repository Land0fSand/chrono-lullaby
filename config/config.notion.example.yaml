# ChronoLullaby 配置示例（Notion 模式最简版）
#
# 使用步骤：
# 1. 复制本文件为 config/config.yaml
# 2. 填写下方的 Notion Integration API Key 与父页面 Page ID
# 3. 运行 `ch init-notion` 初始化 Notion 所需的数据库与页面
# 4. （可选）运行 `ch sync-to-notion --data config` 将本地配置与 Notion 保持一致
#
# 说明：
# - 首次运行 `ch init-notion` 后，database_ids / page_ids 会自动写回此文件
# - 全局设置（telegram/downloader）会被同步到 Notion 的 GlobalSettings 页面
# - 频道配置建议直接在 Notion 的 Config Database 内维护

mode: notion

notion:
  api_key: "secret_xxxxx"             # 在 https://www.notion.so/my-integrations 获取
  page_id: "xxxxx"                    # 父页面 URL 中的 UUID（含连字符）

  database_ids:                       # 运行 `ch init-notion` 后自动填充
    config: ""
    sent_archive: ""
    download_archive: ""
    logs: ""

  page_ids:                           # 运行 `ch init-notion` 后自动填充
    cookies: ""
    global_settings: ""

  sync:
    log_upload_interval: 300          # 日志批量上传间隔（秒）
    archive_sync_interval: 60         # 记录同步间隔（秒）
    machine_id: "machine-1"           # 区分不同机器上传的日志

    # 自动日志清理配置（可选）
    auto_cleanup:
      enabled: false                  # 是否启用自动清理（默认关闭）
      check_interval_days: 7          # 每隔 N 天检查一次
      keep_days: 30                   # 普通日志（INFO/WARNING）保留天数
      error_keep_days: 90             # ERROR 日志单独保留天数（默认 3 个月）
      min_keep_days: 7                # 安全限制：最少保留 7 天

log:
  level: INFO                         # 控制控制台/文件/Notion 日志等级
  single_file_mode: true              # 是否仅使用 logs/all.log 来汇总日志
  file:
    max_bytes: 20971520               # all.log 最大字节数，默认 20MB
    backup_count: 10                  # 额外 all.log.N 轮转文件数量

debug:
  enabled: true

# 下载器本地默认配置
# 说明：这些值作为默认值，如果 Notion GlobalSettings 页面中配置了同名字段，会被覆盖
telegram:
  bot_token: "YOUR_TELEGRAM_BOT_TOKEN"  # Telegram Bot Token
  send_interval: 180                    # 发送间隔（秒）

downloader:
  download_interval: 10800              # 实时频道下载间隔（秒），默认 3 小时
  filter_days: 3                        # 只下载最近 N 天的视频
  max_videos_per_channel: 6             # 每个频道最多检查的视频数
  video_delay_min: 120                  # 同频道内视频间最小延迟（秒）
  video_delay_max: 240                  # 同频道内视频间最大延迟（秒）
  channel_delay_min: 180                # 频道间最小延迟（秒）
  channel_delay_max: 480                # 频道间最大延迟（秒）
  config_check_interval: 3600           # 配置热更新检测间隔（秒），默认 1 小时

# 额外说明：
# - 若想继续使用本地模式，请参考 config/config.local.example.yaml
# - 本地模式需要在 YAML 中维护 telegram/downloader/频道组等完整信息

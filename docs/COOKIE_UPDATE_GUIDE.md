# YouTube Cookies æ›´æ–°æŒ‡å—

## é—®é¢˜ç—‡çŠ¶

å½“çœ‹åˆ°ä»¥ä¸‹é”™è¯¯æ—¶ï¼Œè¯´æ˜ cookies å·²è¿‡æœŸï¼š

```
ERROR: unable to download video data: HTTP Error 403: Forbidden
```

## ğŸ”§ æ–¹æ³•ä¸€ï¼šä½¿ç”¨æµè§ˆå™¨æ‰©å±•ï¼ˆæ¨èï¼‰

### æ­¥éª¤ 1: å®‰è£… Chrome æ‰©å±•

æ¨èä½¿ç”¨ä»¥ä¸‹ä»»ä¸€æ‰©å±•ï¼ˆæŒ‰æ¨èç¨‹åº¦æ’åºï¼‰ï¼š
- **Cookie-Editor** ï¼ˆâ­ æœ€æ¨èï¼Œå¯ç›´æ¥å¯¼å‡º Netscape æ ¼å¼ï¼‰
- **Get cookies.txt LOCALLY** ï¼ˆå¯ç›´æ¥å¯¼å‡º Netscape æ ¼å¼ï¼‰
- **EditThisCookie** ï¼ˆå¯¼å‡º JSONï¼Œéœ€è¦è½¬æ¢ï¼‰
- **cookies.txt** by Lennon Hill

### æ­¥éª¤ 2: ç™»å½• YouTube

1. åœ¨ Chrome ä¸­è®¿é—® https://www.youtube.com
2. ç¡®ä¿å·²ç™»å½•ä½ çš„ YouTube è´¦å·
3. éšä¾¿æ’­æ”¾ä¸€ä¸ªè§†é¢‘ï¼Œç¡®è®¤ç™»å½•çŠ¶æ€æ­£å¸¸

### æ­¥éª¤ 3: å¯¼å‡º Cookies

#### ä½¿ç”¨ Cookie-Editorï¼ˆâ­ æœ€æ¨èï¼‰:

1. ç¡®ä¿ä½ åœ¨ https://www.youtube.com é¡µé¢ä¸Š
2. ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ çš„ Cookie-Editor å›¾æ ‡
3. ç‚¹å‡»å³ä¸Šè§’çš„ **"Export"** æŒ‰é’®ï¼ˆå¯¼å‡ºå›¾æ ‡ï¼‰
4. é€‰æ‹© **"Netscape"** æ ¼å¼
5. å†…å®¹ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿
6. å°†å†…å®¹ç²˜è´´åˆ°æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¿å­˜ä¸º `config/youtube.cookies`

**å®Œæˆï¼** è¿™ä¸ªæ–‡ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ä»»ä½•è½¬æ¢ã€‚

#### ä½¿ç”¨ Get cookies.txt LOCALLY:

1. ç‚¹å‡»æ‰©å±•å›¾æ ‡
2. é€‰æ‹© "Export" æˆ–ç›´æ¥ç‚¹å‡»
3. Cookies ä¼šä»¥ Netscape æ ¼å¼å¯¼å‡º
4. ä¿å­˜ä¸º `youtube.cookies`

#### ä½¿ç”¨ EditThisCookieï¼ˆéœ€è¦è½¬æ¢ï¼‰:

1. ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ çš„ EditThisCookie å›¾æ ‡
2. ç‚¹å‡»"å¯¼å‡º"ï¼ˆExportï¼‰æŒ‰é’®
3. Cookies ä¼šå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ˆJSON æ ¼å¼ï¼‰
4. å°†å†…å®¹ç²˜è´´å¹¶ä¿å­˜ä¸º `youtube_cookies.json`
5. **éœ€è¦è½¬æ¢** - å‚è§æ­¥éª¤ 4

### æ­¥éª¤ 4: è½¬æ¢æ ¼å¼ï¼ˆä»… JSON æ ¼å¼éœ€è¦ï¼‰

**å¦‚æœä½¿ç”¨ Cookie-Editor æˆ– Get cookies.txt LOCALLYï¼š**
- âœ… å·²ç»æ˜¯ Netscape æ ¼å¼ï¼Œè·³è¿‡æ­¤æ­¥éª¤

**å¦‚æœä½¿ç”¨ EditThisCookieï¼ˆJSON æ ¼å¼ï¼‰ï¼š**

```powershell
# è½¬æ¢ JSON æ ¼å¼ä¸º Netscape æ ¼å¼
python scripts/convert_cookies.py youtube_cookies.json config/youtube.cookies
```

### æ­¥éª¤ 5: éªŒè¯

```powershell
# é‡å¯æœåŠ¡
.\ch restart

# æŸ¥çœ‹æ—¥å¿—ï¼Œç¡®è®¤ä¸å†æœ‰ 403 é”™è¯¯
.\ch logs downloader -f
```

---

## ğŸ”§ æ–¹æ³•äºŒï¼šä½¿ç”¨ yt-dlp æå–ï¼ˆæœ€å¯é ï¼‰

### å‰ææ¡ä»¶

ç¡®ä¿å·²å®‰è£… yt-dlpï¼š

```powershell
pip install yt-dlp
# æˆ–
poetry add yt-dlp
```

### æå– Cookies

```powershell
# ä» Chrome æå–
yt-dlp --cookies-from-browser chrome --cookies config/youtube.cookies https://www.youtube.com

# ä» Edge æå–
yt-dlp --cookies-from-browser edge --cookies config/youtube.cookies https://www.youtube.com

# ä» Firefox æå–
yt-dlp --cookies-from-browser firefox --cookies config/youtube.cookies https://www.youtube.com
```

è¿™ä¸ªæ–¹æ³•ä¼šç›´æ¥ä»æµè§ˆå™¨ä¸­æå–å½“å‰æœ‰æ•ˆçš„ cookiesï¼Œå¹¶ä¿å­˜ä¸ºæ­£ç¡®çš„æ ¼å¼ã€‚

---

## ğŸ”§ æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨åˆ›å»ºï¼ˆä¸æ¨èï¼‰

å¦‚æœä¸Šè¿°æ–¹æ³•éƒ½ä¸å¯è¡Œï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»º Netscape æ ¼å¼çš„ cookies æ–‡ä»¶ã€‚

### Netscape Cookie æ ¼å¼è¯´æ˜

```
# Netscape HTTP Cookie File
# This file is generated by yt-dlp.  Do not edit.

domain	flag	path	secure	expiration	name	value
```

æ¯ä¸ªå­—æ®µç”¨ **Tab** åˆ†éš”ï¼Œä¸æ˜¯ç©ºæ ¼ï¼

### å¿…éœ€çš„ YouTube Cookies

è®¿é—® YouTube æ—¶ï¼ŒæŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œåˆ‡æ¢åˆ° "Application" â†’ "Cookies" â†’ "https://www.youtube.com"

è‡³å°‘éœ€è¦ä»¥ä¸‹ cookiesï¼ˆæŒ‰é‡è¦æ€§æ’åºï¼‰ï¼š

1. **`__Secure-3PSID`** - æœ€é‡è¦
2. **`__Secure-1PSID`**
3. **`SAPISID`**
4. **`__Secure-1PAPISID`**
5. **`__Secure-3PAPISID`**
6. **`SSID`**
7. **`LOGIN_INFO`**

### æ‰‹åŠ¨æ ¼å¼ç¤ºä¾‹

```
# Netscape HTTP Cookie File
# This file is generated manually.

.youtube.com	TRUE	/	TRUE	1825205586	__Secure-3PSID	ä½ çš„cookieå€¼
.youtube.com	TRUE	/	TRUE	1825205586	__Secure-1PSID	ä½ çš„cookieå€¼
.youtube.com	TRUE	/	TRUE	1781242103	SAPISID	ä½ çš„cookieå€¼
```

**æ³¨æ„ï¼š**
- å­—æ®µä¹‹é—´ç”¨ **Tab** é”®åˆ†éš”
- `domain` é€šå¸¸ä»¥ `.` å¼€å¤´ï¼ˆå¦‚ `.youtube.com`ï¼‰
- `flag` é€šå¸¸æ˜¯ `TRUE`
- `secure` å¯¹äº `__Secure-*` å¼€å¤´çš„å¿…é¡»æ˜¯ `TRUE`
- `expiration` æ˜¯ Unix æ—¶é—´æˆ³ï¼ˆç§’ï¼‰

---

## ğŸ“‹ è½¬æ¢å·¥å…·ä½¿ç”¨è¯´æ˜

### åŸºæœ¬ç”¨æ³•

```powershell
python scripts/convert_cookies.py <è¾“å…¥JSONæ–‡ä»¶> <è¾“å‡ºæ–‡ä»¶>
```

### ç¤ºä¾‹

```powershell
# å°† EditThisCookie å¯¼å‡ºçš„ JSON è½¬æ¢ä¸º Netscape æ ¼å¼
python scripts/convert_cookies.py youtube_cookies.json config/youtube.cookies
```

### è¾“å‡ºç¤ºä¾‹

```
è¯»å–è¾“å…¥æ–‡ä»¶: youtube_cookies.json
âœ… æˆåŠŸè¯»å– 25 æ¡ cookies
æ­£åœ¨è½¬æ¢æ ¼å¼...
å†™å…¥è¾“å‡ºæ–‡ä»¶: config/youtube.cookies
âœ… è½¬æ¢å®Œæˆï¼

è¾“å‡ºæ–‡ä»¶: config/youtube.cookies
æ€»è®¡: 25 æ¡ cookies
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆ EditThisCookie å¯¼å‡ºçš„ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Ÿ

A: EditThisCookie é»˜è®¤å¯¼å‡ºçš„æ˜¯ JSON æ ¼å¼ï¼Œè€Œ yt-dlp ä½¿ç”¨çš„æ˜¯ Netscape Cookie æ ¼å¼ã€‚ä¸¤è€…æ ¼å¼ä¸åŒï¼Œéœ€è¦è½¬æ¢ã€‚

### Q2: è½¬æ¢åè¿˜æ˜¯ 403 é”™è¯¯ï¼Ÿ

A: å¯èƒ½çš„åŸå› ï¼š
1. **Cookies ä¸å®Œæ•´** - ç¡®ä¿å¯¼å‡ºäº†æ‰€æœ‰ youtube.com åŸŸåä¸‹çš„ cookies
2. **è´¦å·é—®é¢˜** - ç¡®è®¤è´¦å·èƒ½æ­£å¸¸è®¿é—®è§†é¢‘
3. **åœ°åŒºé™åˆ¶** - æŸäº›è§†é¢‘æœ‰åœ°åŒºé™åˆ¶
4. **éœ€è¦é‡æ–°ç™»å½•** - åœ¨æµè§ˆå™¨ä¸­é€€å‡ºç™»å½•ï¼Œé‡æ–°ç™»å½•åå†å¯¼å‡º

### Q3: å¤šä¹…éœ€è¦æ›´æ–°ä¸€æ¬¡ cookiesï¼Ÿ

A: é€šå¸¸ YouTube cookies æœ‰æ•ˆæœŸä¸ºå‡ ä¸ªæœˆã€‚å¦‚æœç»å¸¸é‡åˆ° 403 é”™è¯¯ï¼Œå¯èƒ½éœ€è¦ï¼š
- æ¯æœˆæ›´æ–°ä¸€æ¬¡
- æˆ–è€…åœ¨æ¯æ¬¡æµè§ˆå™¨é€€å‡ºç™»å½•/é‡æ–°ç™»å½•åæ›´æ–°

### Q4: å¯ä»¥ç”¨æ— ç—•æ¨¡å¼çš„ cookies å—ï¼Ÿ

A: ä¸æ¨èã€‚æ— ç—•æ¨¡å¼çš„ cookies åœ¨å…³é—­æµè§ˆå™¨åä¼šå¤±æ•ˆã€‚å»ºè®®ä½¿ç”¨æ­£å¸¸æ¨¡å¼å¹¶ä¿æŒç™»å½•çŠ¶æ€ã€‚

### Q5: è½¬æ¢å·¥å…·æ”¯æŒå“ªäº›æµè§ˆå™¨ï¼Ÿ

A: è½¬æ¢å·¥å…·æ”¯æŒæ‰€æœ‰å¯¼å‡º JSON æ ¼å¼ cookies çš„å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š
- Chrome (EditThisCookie, Export Cookies ç­‰)
- Edge (åŒä¸Š)
- Firefox (Cookies Manager+ ç­‰)

### Q6: Cookies ä¼šæ³„éœ²è´¦å·å—ï¼Ÿ

A: **æ³¨æ„å®‰å…¨**ï¼š
- Cookies æ–‡ä»¶åŒ…å«ç™»å½•å‡­è¯ï¼Œä¸è¦åˆ†äº«ç»™ä»–äºº
- æ·»åŠ åˆ° `.gitignore`ï¼Œä¸è¦æäº¤åˆ° git
- å®šæœŸæ›´æ¢å¯†ç ä¼šä½¿æ—§ cookies å¤±æ•ˆ

---

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¸è¦æäº¤ cookies æ–‡ä»¶åˆ° git**

   ç¡®è®¤ `.gitignore` ä¸­åŒ…å«ï¼š
   ```
   config/youtube.cookies
   youtube_cookies.json
   ```

2. **å®šæœŸæ›´æ–° cookies**

   å»ºè®®æ¯æœˆæ›´æ–°ä¸€æ¬¡ï¼Œæˆ–åœ¨ä»¥ä¸‹æƒ…å†µæ›´æ–°ï¼š
   - æ›´æ”¹äº† YouTube å¯†ç 
   - é€€å‡ºç™»å½•åé‡æ–°ç™»å½•
   - é‡åˆ° 403 é”™è¯¯

3. **ä½¿ç”¨ä¸“ç”¨è´¦å·**

   å»ºè®®ä¸ºè‡ªåŠ¨åŒ–ä»»åŠ¡åˆ›å»ºä¸“ç”¨çš„ YouTube è´¦å·ï¼Œä¸è¦ä½¿ç”¨ä¸»è´¦å·ã€‚

---

## ğŸš€ å¿«é€Ÿå‚è€ƒ

### æ¨èæ–¹æ³•ï¼ˆæœ€ç®€å•ï¼‰

```powershell
# 1. ä½¿ç”¨ yt-dlp ç›´æ¥ä»æµè§ˆå™¨æå–
yt-dlp --cookies-from-browser chrome --cookies config/youtube.cookies https://www.youtube.com

# 2. é‡å¯æœåŠ¡
.\ch restart

# 3. éªŒè¯
.\ch logs downloader -f
```

### å¤‡ç”¨æ–¹æ³•ï¼ˆä½¿ç”¨æ‰©å±•ï¼‰

```powershell
# 1. ä½¿ç”¨ EditThisCookie å¯¼å‡ºä¸º youtube_cookies.json
# 2. è½¬æ¢æ ¼å¼
python scripts/convert_cookies.py youtube_cookies.json config/youtube.cookies

# 3. é‡å¯æœåŠ¡
.\ch restart

# 4. éªŒè¯
.\ch logs downloader -f
```

---

## ğŸ“š ç›¸å…³èµ„æº

- [yt-dlp å®˜æ–¹æ–‡æ¡£ - Cookies](https://github.com/yt-dlp/yt-dlp#authentication-with-cookies)
- [Netscape Cookie æ ¼å¼è¯´æ˜](http://fileformats.archiveteam.org/wiki/Netscape_cookies.txt)
- [EditThisCookie æ‰©å±•](https://chrome.google.com/webstore/detail/editthiscookie/)
- [Get cookies.txt LOCALLY æ‰©å±•](https://chrome.google.com/webstore/detail/get-cookiestxt-locally/)

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹æ—¥å¿—äº†è§£è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼š

```powershell
.\ch logs downloader error
```

